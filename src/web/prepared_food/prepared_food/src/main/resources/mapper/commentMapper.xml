<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zjx.dao.CommentDao">
    <insert id="addItem" parameterType="com.zjx.entity.Comment">
        INSERT INTO comment VALUES(
        #{identificationCode},
        #{userId},
        #{userComment},
        #{score},
        #{state},
        #{time})
    </insert>
    <select id="queryList" parameterType="String" resultType="com.zjx.entity.comment.CommentEntity">
        SELECT identificationCode,
        comment.userId,
        nickname,
        userComment,
        score,
        time
        FROM comment,user
        WHERE identificationCode=#{code} AND comment.userId = user.user_id
    </select>
    <select id="queryItemInHour" parameterType="String">
        SELECT SUM(identificationCode) FROM comment WHERE identificationCode=#{code} AND time >= NOW() - INTERVAL 1 HOUR;
    </select>
    <select id="queryItemInDay" parameterType="String">
        SELECT SUM(identificationCode) FROM comment WHERE identificationCode=#{code} and time >= CURDATE() - INTERVAL 1 DAY;
    </select>
    <select id="queryItemInWeek" parameterType="String">
        SELECT SUM(identificationCode) FROM comment WHERE identificationCode=#{code} and time >= CURDATE() - INTERVAL 7 DAY;
    </select>
<!--    SELECT * FROM comment WHERE time >= NOW() - INTERVAL 1 HOUR; -->

</mapper>